<!-- GENERATED: do not edit. Source: RFC-0001 -->
<!-- SIGNATURE: sha256:80234e79496bba793e977fb08ed792255e7236692b1156ffacb33843e367ed09 -->

# RFC-0001: Feature commands for cursor-helper

> **Version:** 1.0.0 | **Status:** normative | **Phase:** stable

---

## 1. Summary

---

## 2. Specification

### [RFC-0001:C-COMMANDS] Command Reference (Normative) <a id="rfc-0001c-commands"></a>

This RFC defines the command-line interface for cursor-helper.

## Foundation Commands

### `cursor-helper list`

List all Cursor projects.

```
cursor-helper list [--with-hash] [--with-chat-count]
```

**Flags:**
- `--with-hash`: Show workspace hash for each project
- `--with-chat-count`: Show number of chat sessions

**Output:** Table with columns: Path, Last Opened, Chat Count (optional), Hash (optional)

---

### `cursor-helper stats`

Show usage statistics for a project.

```
cursor-helper stats [<project-path>]
```

If `<project-path>` is omitted, prompt to select from known projects.

**Metrics:**
- Chat session count
- Tokens used (if available)
- Files changed
- Time spent (if available)

---

## Data Management Commands

### `cursor-helper export-chat`

Export chat history to a readable format.

```
cursor-helper export-chat <project-path> [--format=md|json]
```

**Format:**
- `md`: Markdown with conversation structure
- `json`: Full fidelity with metadata

---

### `cursor-helper clean`

Remove orphaned workspace storage.

```
cursor-helper clean [--dry-run]
```

Orphaned = workspace storage exists but project folder does not.

**Behavior:**
- `--dry-run` (default): Show what would be deleted, ask confirmation
- Without `--dry-run`: Require explicit `--yes` flag

---

## Backup and Restore Commands

### `cursor-helper backup`

Backup all Cursor metadata for a project.

```
cursor-helper backup <project-path> <backup-file>
```

Creates a gzipped tar archive containing:
- `workspaceStorage/` contents
- `projects/` entry if exists

---

### `cursor-helper restore`

Restore a project from backup.

```
cursor-helper restore <backup-file> <new-path>
```

Restores to new location, preserving all chat history.

---

## Advanced Commands

### `cursor-helper clone`

Clone a project with full chat history to a new location.

```
cursor-helper clone <old-path> <new-path>
```

Unlike `rename`:
- Creates new UUIDs for all references
- Original project remains intact
- Both projects have independent chat history

---

### `cursor-helper rename`

Rename a project (already implemented).

```
cursor-helper rename <old-path> <new-path>
```

Updates all Cursor metadata to reflect the new path.

**Behavior:**
- Updates workspace hash
- Updates folder ID slug
- Migrates workspace storage directory

*Since: v0.1.0*

### [RFC-0001:C-PRIORITY] Implementation Priority (Normative) <a id="rfc-0001c-priority"></a>

Commands MUST be implemented in the following priority order:

## Phase 1: Foundation (Low Risk, High Utility)

1. **`list`** — Discover projects, validate data model
2. **`stats`** — Expose usage data, validate extraction approach

**Rationale:** These commands read-only data. No risk of data loss. Establish understanding of Cursor's data structures early.

---

## Phase 2: Data Management

3. **`export-chat`** — Validate chat format parsing
4. **`clean`** — Requires `list` to show affected projects

**Rationale:** `export-chat` confirms we understand the chat session format. `clean` is the first write operation, needs careful handling.

---

## Phase 3: Backup/Restore

5. **`backup`** — Archive existing state
6. **`restore`** — Recover from backup

**Rationale:** These provide safety net for higher-risk operations. Must be stable before `clone`.

---

## Phase 4: Advanced

7. **`clone`** — Complex UUID remapping
8. **`rename`** — Already implemented, will be integrated

**Rationale:** `clone` has highest risk of data corruption. Only implement after all other commands are stable.

---

## Out-of-Scope Commands

The following are explicitly NOT in scope for this RFC:

- `cursor-helper merge` — Merge chat histories from multiple sessions
- `cursor-helper import` — Import chats from other IDEs or formats
- `cursor-helper sync` — Sync project state across machines

*Since: v0.1.0*

### [RFC-0001:C-SAFETY] Safety and Data Integrity (Normative) <a id="rfc-0001c-safety"></a>

All commands that modify data MUST follow these safety rules:

## Dry-Run by Default

Destructive operations MUST default to dry-run mode:

- `clean --dry-run` shows what would be deleted
- No changes are made without explicit confirmation

## Confirmation Required

Before executing destructive operations:

```
$ cursor-helper clean
Found 3 orphaned workspaces:
  /Users/foo/.cursor/workspaceStorage/abc123
  /Users/foo/.cursor/workspaceStorage/def456
  /Users/foo/.cursor/workspaceStorage/ghi789

Would delete 3 items. Use --yes to confirm.
```

The `--yes` flag bypasses the confirmation prompt.

## Atomic Operations

Commands that modify multiple files MUST be atomic where possible:

- Use `rename` operations, not `copy-then-delete`
- If atomicity is not possible, provide rollback information

## Backup Before Modifications

For `rename` and `clone`:

1. Command MUST warn if target already exists
2. Command SHOULD recommend `backup` first for important projects
3. On conflict, abort with clear error rather than partial overwrite

## Data Validation

Before any write operation:

1. Verify source data exists and is readable
2. Verify target location is accessible
3. Verify sufficient disk space for the operation
4. On failure, leave source data unchanged

## Error Messages

Error messages MUST:

- Be human-readable, not raw error codes
- Suggest remediation when possible
- Distinguish between "user error" (wrong input) and "system error" (IO failure)

*Since: v0.1.0*

### [RFC-0001:C-OMITTED] Out of Scope (Normative) <a id="rfc-0001c-omitted"></a>

The following are explicitly OUT OF SCOPE for cursor-helper:

## Not Implemented

- **Merge chat histories** — `cursor-helper merge` is not supported
  - Chat sessions are tied to project UUIDs
  - Merging would create semantic inconsistencies

- **Import from external sources** — `cursor-helper import` is not supported
  - Chat formats from other IDEs (Claude Code, Copilot, etc.) are out of scope
  - User can use `export-chat` for portability, not import

- **Cross-machine sync** — `cursor-helper sync` is not supported
  - Project state is machine-specific (paths, timestamps)
  - Use `backup`/`restore` for manual migration

- **Cursor application modification** — We manipulate stored data only
  - We do not modify Cursor's configuration files
  - We do not restart or reconfigure Cursor

- **IDE-agnostic project management** — This is a Cursor-specific tool
  - Support for VS Code, VSCodium, or other editors is not planned

## Not Planned

- **Real-time sync with Cursor** — We read/write files, no IPC
- **Plugin/extension architecture** — Single binary, no plugins
- **GUI interface** — CLI only

*Since: v0.1.0*

---

## Changelog

### v0.1.0 (2026-01-19)

Initial draft
